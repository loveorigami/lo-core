(function(a){a.fn.yamapInput=function(b){return this.each(function(){var g=a(this);var f=g.find(".yamap-dialog");var d=f.find(".yamap-area");var e=g.find(".yamap-search");var c=g.find('input[type="text"]:first');var i=c.val();f.dialog(b.dialog);c.on("click",function(){f.dialog("open")});var h=function(){var j=c.val();if(j){i=j.split(",")}else{i=b.map.center}return i};ymaps.ready(function(){var l=h();var k=new ymaps.Map(b.mapId,{center:l,zoom:b.map.zoom});var j=new ymaps.Placemark(l);k.geoObjects.add(j);k.events.add("click",function(n){var m=n.get("coords");j.geometry.setCoordinates(m);c.val(m.join(","))});e.on("keyup",function(m){if(m.keyCode==13){ymaps.geocode(e.val(),{results:1}).then(function(n){var p=n.geoObjects.get(0);var o=p.geometry.getCoordinates();j.geometry.setCoordinates(o);c.val(o.join(","));k.panTo(o)})}})})})}})(jQuery);